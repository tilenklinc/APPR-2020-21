---
title: "Analiza delniških trgov in tržnih kapitalizacij borz v programu R"
author: "Tilen Klinc"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme
Za projektno nalogo pri APPR sem pripravil analizo delniških trgov in prikaz borz ter
pripadajočih tržnih kapitalizacij na zemljevidu sveta. Primerjal sem odzivnost cen delnic
na dogajanje v svetu (npr. izdaja novih produktov, COVID kriza in podobno).
Svoje podatke sem v obliki xml in html tabele dobil:
1. iz strani [Yahoo Finance](https://finance.yahoo.com/) v xml formatu
2. tabela pa je bila uvožena iz Wikipedije.

![](slike/stock_market.png){width=20%}

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz2.r", encoding="UTF-8")
```

Svoje podatke sem uvozil v obliki tabele iz Wikipedije in kot xml preko Yahoo Finance strani.
Kasnehe sem oblikoval in prečistil podatke ter ustvaril dve izhodiščni tabeli v obliki tidy data:


1. Tabela s podatkih o delnicah (v obliki tidyData):    
    *`Datum` - vsi dnevi od 1.1.2010 do 1.1.2021 (datum)
* `Ime` - ime delnice, (besedilo)
* `Tip` - podatek: podatki izmerjeni na datum ob odprtju/zaprtju ter najvišja/najnižja vrednost (besedilo)
* `Vrednost` - meritev: cena delnice v določenem trenutku (število)

2. Tabela s podatki o tržni kapitalizaciji in mesečnem volumnu (tidyData):    
  * `Borza` - ime borze (besedilo)
* `Regija` - podatek kje se borza "nahaja" (besedilo)
* `Market_cap` - meritev: tržna kapitalizacija na posamezni borzi, (število)
* `Monthly_volume` - meritev: mesečno trgovanje (število)
  
***

# Analiza in vizualizacija podatkov

```{r vizualizacija, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")

```
    
Spodnji graf prikazuje spreminjane cen delnic od 1. 1. 2010 do 1. 1. 2021. Opazimo, da skozi leta v povprečju prevladuje trend naraščanja cen delnic.        

```{r}
print(graf1)
```


```{r}
print(cplot)
```


***

# Napredna analiza podatkov


***
# Shiny
```{r shiny}
shinyAppDir("shiny", options=list(width="100%", height=800))
```
