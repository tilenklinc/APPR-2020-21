---
title: "Analiza delniških trgov"
author: "Tilen Klinc"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme
Za projektno nalogo pri APPR sem pripravil analizo delniških trgov in prikaz borz ter
pripadajočih tržnih kapitalizacij na zemljevidu sveta.
![](slike/stock_market.png){width=20%}

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz2.r", encoding="UTF-8")
```

Svoje podatke sem uvozil v obliki HTML iz Wikipedije in kot xml preko Yahoo Finance strani.
Pridobil in oblikoval sem dve osnovni tabeli:


1. Tabela s podatkih o delnicah (v obliki tidyData):    
    *`Datum` - vsi dnevi od 1.1.2010 do 1.1.2021 (datum)
* `Ime` - ime delnice, (besedilo)
* `Tip` - podatek: podatki izmerjeni na datum ob odprtju/zaprtju ter najvišja/najnižja vrednost (besedilo)
* `Vrednost` - meritev: cena delnice v določenem trenutku (število)

2. HTML tabela s podatki o tržni kapitalizaciji:    
  * `Borza` - ime borze (besedilo)
* `Regija` - podatek kje se borza "nahaja" (besedilo)
* `Market_cap` - meritev: tržna kapitalizacija na posamezni borzi, (število)
* `Monthly_volume` - meritev: mesečno trgovanje (število)
  
***

# Analiza in vizualizacija podatkov

```{r vizualizacija, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```
Spodnji graf prikazuje spreminjane cen delnic od 1. 1. 2010 do 1. 1. 2021. Opazimo, da v povprečju prevlada trend naraščanja cen.
```{r}
print(graf2)
```
```{r}
cplot
```


***

# Napredna analiza podatkov

